<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat Widget Test Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 40px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .status {
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            font-weight: 500;
        }
        .info {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-left: 5px solid #2196f3;
            color: #0d47a1;
        }
        .success {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            border-left: 5px solid #4caf50;
            color: #2e7d32;
        }
        .error {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border-left: 5px solid #f44336;
            color: #c62828;
        }
        .warning {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 5px solid #ff9800;
            color: #e65100;
        }
        code {
            background-color: #f5f5f5;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'SF Mono', 'Monaco', 'Cascadia Code', monospace;
            font-size: 0.9em;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px;
            font-weight: 500;
            transition: transform 0.2s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .test-button:active {
            transform: translateY(0);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        h3 {
            color: #34495e;
            margin-top: 30px;
        }
        #debug-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        ol {
            line-height: 1.6;
        }
        li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– AI Chat Widget Test</h1>
        
        <div class="status warning">
            <strong>âš ï¸ Ã–NEMLI GÃœVENLIK UYARISI:</strong>
            <p>Bu dosya bir Ã¶rnek (example) dosyasÄ±dÄ±r. GerÃ§ek kullanÄ±m iÃ§in:</p>
            <ol>
                <li>Bu dosyayÄ± kopyalayÄ±n: <code>cp test.example.html test.html</code></li>
                <li><code>YOUR_AGENT_ID_HERE</code> kÄ±smÄ±nÄ± gerÃ§ek ElevenLabs agent ID'niz ile deÄŸiÅŸtirin</li>
                <li>GerÃ§ek agent ID'li dosyalarÄ± asla git'e commit etmeyin!</li>
            </ol>
        </div>
        
        <div class="status info">
            <strong>Test TalimatlarÄ±:</strong>
            <ol>
                <li>Sunucunuzun <code>http://localhost:3001</code> adresinde Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun</li>
                <li><code>YOUR_AGENT_ID_HERE</code> placeholder'Ä±nÄ± gerÃ§ek ElevenLabs agent ID'niz ile deÄŸiÅŸtirin</li>
                <li>Bu dosyayÄ± doÄŸrudan tarayÄ±cÄ±nÄ±zda aÃ§Ä±n (file:// protokolÃ¼)</li>
                <li>TarayÄ±cÄ± konsolunda debug mesajlarÄ±nÄ± kontrol edin</li>
                <li>SaÄŸ alt kÃ¶ÅŸede chat widget'Ä±nÄ± arayÄ±n</li>
            </ol>
        </div>
        
        <div class="status" id="status">
            <strong>Durum:</strong> Widget yÃ¼kleniyor...
        </div>
        
        <h3>Test Kontrolleri:</h3>
        <button class="test-button" onclick="testWidget()">Widget BaÄŸlantÄ±sÄ±nÄ± Test Et</button>
        <button class="test-button" onclick="AIChatWidget.open()">Widget'Ä± AÃ§</button>
        <button class="test-button" onclick="AIChatWidget.close()">Widget'Ä± Kapat</button>
        <button class="test-button" onclick="AIChatWidget.toggle()">Widget'Ä± AÃ§/Kapat</button>
        
        <h3>Debug Bilgileri:</h3>
        <div id="debug-info">
            <p><strong>Mevcut URL:</strong> <span id="current-url"></span></p>
            <p><strong>Protokol:</strong> <span id="protocol"></span></p>
            <p><strong>Widget Mevcut:</strong> <span id="widget-available"></span></p>
            <p><strong>Agent ID:</strong> <span id="agent-id"></span></p>
        </div>
    </div>

    <!-- 
    Widget Script - PLACEHOLDER AGENT ID Ä°LE
    
    GÃœVENLIK UYARISI: Bu dosyada placeholder kullanÄ±lÄ±yor!
    GerÃ§ek kullanÄ±m iÃ§in YOUR_AGENT_ID_HERE kÄ±smÄ±nÄ± deÄŸiÅŸtirin.
    -->
    <script src="http://localhost:3001/widget.js" 
        data-server-url="http://localhost:3001" 
        data-agent-id="YOUR_AGENT_ID_HERE"></script>
    
    <script>
        // Debug bilgilerini gÃ¼ncelle
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('protocol').textContent = window.location.protocol;
        document.getElementById('agent-id').textContent = 'YOUR_AGENT_ID_HERE (placeholder)';
        
        // Widget baÄŸlantÄ±sÄ±nÄ± test et
        async function testWidget() {
            const statusDiv = document.getElementById('status');
            
            try {
                statusDiv.innerHTML = '<strong>Durum:</strong> BaÄŸlantÄ± test ediliyor...';
                statusDiv.className = 'status info';
                
                const response = await fetch('http://localhost:3001/api/health');
                const data = await response.json();
                
                if (data.status === 'ok') {
                    statusDiv.innerHTML = '<strong>Durum:</strong> âœ… Sunucu baÄŸlantÄ±sÄ± baÅŸarÄ±lÄ±!';
                    statusDiv.className = 'status success';
                } else {
                    statusDiv.innerHTML = '<strong>Durum:</strong> âŒ Sunucu beklenmeyen yanÄ±t dÃ¶ndÃ¼';
                    statusDiv.className = 'status error';
                }
            } catch (error) {
                statusDiv.innerHTML = '<strong>Durum:</strong> âŒ Sunucuya baÄŸlanÄ±lamadÄ±. http://localhost:3001 adresinde Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun';
                statusDiv.className = 'status error';
                console.error('BaÄŸlantÄ± testi baÅŸarÄ±sÄ±z:', error);
            }
        }
        
        // Widget'Ä±n mevcut olup olmadÄ±ÄŸÄ±nÄ± kontrol et
        setTimeout(() => {
            const widgetAvailable = typeof AIChatWidget !== 'undefined';
            document.getElementById('widget-available').textContent = widgetAvailable ? 'Evet' : 'HayÄ±r';
            
            if (widgetAvailable) {
                // Agent ID placeholder kontrolÃ¼
                const scriptTag = document.querySelector('script[data-agent-id]');
                const agentId = scriptTag ? scriptTag.getAttribute('data-agent-id') : 'BulunamadÄ±';
                
                if (agentId === 'YOUR_AGENT_ID_HERE') {
                    document.getElementById('status').innerHTML = '<strong>Durum:</strong> âš ï¸ Widget yÃ¼klendi ama agent ID placeholder! GerÃ§ek agent ID gerekli.';
                    document.getElementById('status').className = 'status warning';
                } else {
                    document.getElementById('status').innerHTML = '<strong>Durum:</strong> âœ… Widget baÅŸarÄ±yla yÃ¼klendi!';
                    document.getElementById('status').className = 'status success';
                }
            } else {
                document.getElementById('status').innerHTML = '<strong>Durum:</strong> âŒ Widget yÃ¼klenemedi';
                document.getElementById('status').className = 'status error';
            }
        }, 2000);
        
        // Sayfa yÃ¼klendiÄŸinde otomatik test
        window.addEventListener('load', () => {
            setTimeout(testWidget, 1000);
        });
    </script>
</body>
</html> 